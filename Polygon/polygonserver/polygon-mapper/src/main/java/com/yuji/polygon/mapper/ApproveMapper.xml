<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yuji.polygon.mapper.ApproveMapper">

    <resultMap id="BaseResultMap" type="com.yuji.polygon.entity.Approve">
        <id column="id" property="id"/>
        <result column="business_no" property="businessNo"/>
        <result column="flow_node_no" property="flowNodeNo"/>
        <result column="approve_no" property="approveNo"/>
        <result column="approve_name" property="approveName"/>
        <result column="approve_info" property="approveInfo"/>
        <result column="approve_state" property="approveState"/>
        <result column="approve_date" property="approveDate"/>


    </resultMap>


    <insert id="insertApprove" parameterType="com.yuji.polygon.entity.Approve" useGeneratedKeys="true" keyProperty="id">
        insert into poly_approve set business_no=#{businessNo}, flow_node_no=#{flowNodeNo}, approve_no=#{approveNo},
        approve_name=#{approveName}, approve_info=#{approveInfo}, approve_state=#{approveState}, approve_date=#{approveDate}
    </insert>


    <update id="updateApprove" parameterType="com.yuji.polygon.entity.Approve">
        update poly_approve set
        <if test="approveInfo != null">
            approve_info = #{approveInfo},
        </if>
        <if test="approveDate != null">
            approve_date = #{approveDate},
        </if>
        approve_state = #{approveState}
        where flow_node_no = #{flowNodeNo}
    </update>

    <select id="findApproveByApproveNo" resultType="com.yuji.polygon.entity.Approve">
        select * from poly_approve where approve_no = #{approveNo}
    </select>

    <delete id="deleteApproveByBusinessNo">
        delete from poly_approve where business_no = #{businessNo}
    </delete>

</mapper>